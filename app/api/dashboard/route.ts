import { NextResponse } from 'next/server';import { Client } from 'pg';export async function GET(){const url = process.env.DATABASE_URL; if(!url) return NextResponse.json({ ok:false, error:'DATABASE_URL missing' }, { status:500 });const client = new Client({ connectionString: url, ssl: { rejectUnauthorized: false } });try{await client.connect();const q1 = await client.query('select count(*)::int as tenants from tenants');const q2 = await client.query('select count(*)::int as invoices from invoices');const q3 = await client.query('select id, supplier_name, invoice_no, invoice_date, total_inc from invoices order by created_at desc limit 10');await client.end();return NextResponse.json({ ok:true, tenants: q1.rows[0].tenants, invoices: q2.rows[0].invoices, latest: q3.rows });}catch(e:any){return NextResponse.json({ ok:false, error: e.message }, { status:500 });}}